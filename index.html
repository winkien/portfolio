<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0,  maximum-scale=1, minimum-scale=1" />
  <meta charset="UTF-8">
  <meta name="description" content="Winkie Ng's Portfolio">
  <meta property="og:image" content="img/logo.png"/>
  <title>Winkie Ng's Portfolio</title>
  <link href="css/style.css" rel="stylesheet">
  <link rel="icon" href="img/logo.png">

  <!-- Animate on Scroll -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
</head>

<body>
  <!-- header -->
  <section class="navbar">
    <h2><span class="heading-w">.</span></h2>
    <nav>
      <input type="checkbox" id="nav" class="hidden">
      <label for="nav" class="nav-btn">
        <i></i>
        <i></i>
        <i></i>
      </label>
      <div class="logo">
        <a href="index.html">WN</a>
      </div>
      <div class="nav-wrapper">
        <ul>
          <li><a href="index.html" class="nav-link">Home</a></li>
          <li><a href="bio.html" class="nav-link">About</a></li>
          <li><a href="index.html#work" class="nav-link">Work</a></li>
          <li><a href="index.html#side" class="nav-link">Side Project</a></li>
          <li><a href="https://www.linkedin.com/in/winkie-ng"> <i class="fa fa-linkedin-square"></i></a></li>
        </ul>
      </div>
    </nav>
  </section>


  <section class="home-page">
    <img src="img/back-to-top.png" alt="back-to-top" onclick="topFunction()" id="myBtn" title="Go to top">
  </section>

  <section class="banner">
    <img src="img/index/banner.png" alt="banner" >
    <!-- class="home-banner" -->
    <!-- <img src="img/index/banner-mobile.png" alt="banner-mobile" class="home-banner-mobile"> -->
  </section>

  <section id="work">
    <!-- <div class="home-web"> -->
      <div class="home-project">
        <a href="lfm.html">
          <img src="img/index/home4.png" alt="lfm-thumb">
          <!-- <img src="img/index/home3-mobile.png" alt="sune-thumb-mobile" class="home-mobile"> -->
        </a>
      </div>
      <div class="home-project">
        <a href="sune.html">
          <img src="img/index/home3.png" alt="sune-thumb">
          <!-- <img src="img/index/home3-mobile.png" alt="sune-thumb-mobile" class="home-mobile"> -->
        </a>
      </div>
      <div class="home-project">
        <a href="holland.html">
          <img src="img/index/home2.png" alt="holland-thumb">
          <!-- <img src="img/index/home2-mobile.png" alt="holland-thumb-mobile" class="home-mobile"> -->
        </a>
      </div>
      <div class="home-project">
        <a href="zen.html">
          <img src="img/index/home1.png" alt="zen-thumb">
          <!-- <img src="img/index/home1-mobile.png" alt="zen-thumb-mobile" class="home-mobile"> -->
        </a>
      </div>
      <div class="home-project">
        <a href="art.html">
          <img src="img/index/art-gallery.png" alt="art-thumb">
          <!-- <img src="img/index/art-gallery-mobile.png" alt="art-gallery-thumb-mobile" class="home-mobile"> -->
        </a>
      </div>
    <!-- </div> -->
  </section>
  
  <footer class="footer-area">
    <div class="main">
      <div class="footer">
        <img src="img/index/footer.png" alt="footer" width="100%">
        <!-- <h1><i>let's create together</i></h1> -->
        <div class="single-footer">
          <ul>
            <li>
              <p><a href="pdf/Ng_Winkie_Resume.pdf" target="_blank">Resume</a></p>
            </li>
            <li>
              <p><a href="mailto:ng.winkie@yahoo.com">Email</a></p>
            </li>
            <li>
              <p><a href="https://www.linkedin.com/in/winkie-ng/">Linkedin</a></p>
            </li>
          </ul>
        </div>
        <img src="img/index/footer2.png" alt="footer2" width="100%">
      </div>
    </div>
  </footer>



  <script src="scripts/style.js"></script>

  <script>
  //Get the button
  var mybutton = document.getElementById("myBtn");

  // When the user scrolls down 20px from the top of the document, show the button
  window.onscroll = function() {scrollFunction()};

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      mybutton.style.display = "block";
    } else {
      mybutton.style.display = "none";
    }
  }

  // When the user clicks on the button, scroll to the top of the document
  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }
  </script>

  <script>
    function useEventListener(eventName, handler, element = document) {
  const savedHandler = React.useRef()

  React.useEffect(() => {
    savedHandler.current = handler
  }, [handler])

  React.useEffect(() => {
    const isSupported = element && element.addEventListener
    if (!isSupported) return

    const eventListener = (event) => savedHandler.current(event)

    element.addEventListener(eventName, eventListener)

    return () => {
      element.removeEventListener(eventName, eventListener)
    }
  }, [eventName, element])
}

/**
 * Animated Cursor
 * Replaces the native cursor with a custom animated cursor.
 *
 * @author Stephen Scaff
 */
function AnimatedCursor({
  color = '220, 90, 90',
  outerAlpha = 0.4,
  innerSize = 8,
  outerSize = 8,
  outerScale = 5,
  innerScale = 0.7
}) {
  const cursorOuterRef = React.useRef()
  const cursorInnerRef = React.useRef()
  const requestRef = React.useRef()
  const previousTimeRef = React.useRef()
  const [coords, setCoords] = React.useState({ x: 0, y: 0 })
  const [isVisible, setIsVisible] = React.useState(true)
  const [isActive, setIsActive] = React.useState(false)
  const [isActiveClickable, setIsActiveClickable] = React.useState(false)
  let endX = React.useRef(0)
  let endY = React.useRef(0)

  const onMouseMove = React.useCallback(({ clientX, clientY }) => {
    setCoords({ x: clientX, y: clientY })
    cursorInnerRef.current.style.top = clientY + 'px'
    cursorInnerRef.current.style.left = clientX + 'px'
    endX.current = clientX
    endY.current = clientY
  }, [])

  const animateOuterCursor = React.useCallback(
    (time) => {
      if (previousTimeRef.current !== undefined) {
        coords.x += (endX.current - coords.x) / 8
        coords.y += (endY.current - coords.y) / 8
        cursorOuterRef.current.style.top = coords.y + 'px'
        cursorOuterRef.current.style.left = coords.x + 'px'
      }
      previousTimeRef.current = time
      requestRef.current = requestAnimationFrame(animateOuterCursor)
    },
    [requestRef] // eslint-disable-line
  )

  React.useEffect(() => requestRef.current = requestAnimationFrame(animateOuterCursor), [animateOuterCursor])

  const onMouseDown  = React.useCallback(() => setIsActive(true), [])
  const onMouseUp    = React.useCallback(() => setIsActive(false), [])
  const onMouseEnter = React.useCallback(() => setIsVisible(true), [])
  const onMouseLeave = React.useCallback(() => setIsVisible(false), [])

  useEventListener('mousemove', onMouseMove, document)
  useEventListener('mousedown', onMouseDown, document)
  useEventListener('mouseup', onMouseUp, document)
  useEventListener('mouseenter', onMouseEnter, document)
  useEventListener('mouseleave', onMouseLeave, document)

  React.useEffect(() => {
    if (isActive) {
      cursorInnerRef.current.style.transform = `scale(${innerScale})`
      cursorOuterRef.current.style.transform = `scale(${outerScale})`
    } else {
      cursorInnerRef.current.style.transform = 'scale(1)'
      cursorOuterRef.current.style.transform = 'scale(1)'
    }
  }, [innerScale, outerScale, isActive])

  React.useEffect(() => {
    if (isActiveClickable) {
      cursorInnerRef.current.style.transform = `scale(${innerScale * 1.3})`
      cursorOuterRef.current.style.transform = `scale(${outerScale * 1.4})`
    }
  }, [innerScale, outerScale, isActiveClickable])

  React.useEffect(() => {
    if (isVisible) {
      cursorInnerRef.current.style.opacity = 1
      cursorOuterRef.current.style.opacity = 1
    } else {
      cursorInnerRef.current.style.opacity = 0
      cursorOuterRef.current.style.opacity = 0
    }
  }, [isVisible])

  React.useEffect(() => {
    const clickables = document.querySelectorAll(
      'a, input[type="submit"], input[type="image"], label[for], select, button, .link'
    )
    clickables.forEach((el) => {
      el.style.cursor = 'none'

      el.addEventListener('mouseover', () => {
        setIsActive(true)
      })
      el.addEventListener('click', () => {
        setIsActive(true)
        setIsActiveClickable(false)
      })
      el.addEventListener('mousedown', () => {
        setIsActiveClickable(true)
      })
      el.addEventListener('mouseup', () => {
        setIsActive(true)
      })
      el.addEventListener('mouseout', () => {
        setIsActive(false)
        setIsActiveClickable(false)
      })
    })

    return () => {
      clickables.forEach((el) => {
        el.removeEventListener('mouseover', () => {
          setIsActive(true)
        })
        el.removeEventListener('click', () => {
          setIsActive(true)
          setIsActiveClickable(false)
        })
        el.removeEventListener('mousedown', () => {
          setIsActiveClickable(true)
        })
        el.removeEventListener('mouseup', () => {
          setIsActive(true)
        })
        el.removeEventListener('mouseout', () => {
          setIsActive(false)
          setIsActiveClickable(false)
        })
      })
    }
  }, [isActive])

  const styles = {
    cursor: {
      zIndex: 999,
      position: 'fixed',
      opacity: 1,
      pointerEvents: 'none',
      transition: 'opacity 0.15s ease-in-out, transform 0.15s ease-in-out'
    },
    cursorInner: {
      position: 'fixed',
      borderRadius: '50%',
      width: innerSize,
      height: innerSize,
      pointerEvents: 'none',
      backgroundColor: `rgba(${color}, 1)`,
      transition: 'opacity 0.15s ease-in-out, transform 0.25s ease-in-out'
    },
    cursorOuter: {
      position: 'fixed',
      borderRadius: '50%',
      pointerEvents: 'none',
      width: outerSize,
      height: outerSize,
      backgroundColor: `rgba(${color}, ${outerAlpha})`,
      transition: 'opacity 0.15s ease-in-out, transform 0.15s ease-in-out'
    }
  }

  return (
    <React.Fragment>
      <div ref={cursorOuterRef} style={styles.cursorOuter} />
      <div ref={cursorInnerRef} style={styles.cursorInner} />
    </React.Fragment>
  )
}


function App() {
  return (
    <div className="App">
      <AnimatedCursor/>
      <section>
        <h1>Animated Cursor <br/>React Component</h1>
        <hr/>
        <p>An animated cursor component made as a <a>Functional Component</a>, using <a>React hooks</a> like <a>useEffect</a> to handle event listeners, local state, an  <a>RequestAnimationFrame</a> management.</p>
        <p>Hover over these <a>links</a> and see how that animated cursor does it's thing. Kinda nifty, right? Not right for most things, but a nice move for more interactive-type projects. Here's another <a href="">link to nowhere.</a></p>
        <p>Play with the <a>css variables</a> to influence the cursor, cursor outline size, and amount of scale on target hover. I suppose those could all be <a>props</a> with some. Click in the margin to check click animation.</p>
      <p>There's probably a better way to manage these kind of events, but this was the best I could come up with. Recently started mucking more with React cause I'm down with the simplicity of Functional Components and Hooks. And if you read the docs, the future ain't class components. So, best get on them functions.</p>
      </section>
    </div>
  );
}
ReactDOM.render(<App />, document.getElementById('app'))


  </script>

</body>

</html>
